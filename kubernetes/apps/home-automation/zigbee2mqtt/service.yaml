---
apiVersion: v1
kind: Service
metadata:
  namespace: home-automation
  labels:
    app: zigbee2mqtt
  name: zigbee2mqtt
spec:
  selector:
    app: zigbee2mqtt
  type: ClusterIP
  ports:
  - name: web-ui
    protocol: TCP
    port: 9442
    targetPort: 9442
---
apiVersion: v1
kind: Service
metadata:
  name: zigbee2mqtt-shared-ip
  namespace: home-automation
  annotations:
    io.cilium/lb-ipam-ips: "10.0.0.20"
    io.cilium/lb-ipam-sharing-key: "home-automation-shared"
spec:
  selector:
    app: zigbee2mqtt
  ports:
    - port: 6379
      targetPort: 6379
      protocol: TCP
  type: LoadBalancer
